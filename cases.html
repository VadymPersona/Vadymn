<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Major Shop</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            background-color: #000; color: white; 
            font-family: -apple-system, sans-serif;
            padding: 24px;
            padding-bottom: 120px;
        }

        /* --- –ö–ê–†–¢–û–ß–ö–ò (–°—Ç–∏–ª—å –∏–∑ –ü—Ä–æ—Ñ–∏–ª—è) --- */
        .card-grad { 
            background: linear-gradient(145deg, #1a1a1a 0%, #050505 100%); 
            border: 1px solid rgba(255,255,255,0.08); 
            border-radius: 30px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .card-grad:active { transform: scale(0.98); }

        /* –°–æ—Å—Ç–æ—è–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ */
        .locked {
            opacity: 0.5;
            filter: grayscale(1);
            pointer-events: none;
            border-color: rgba(255, 255, 255, 0.05) !important;
            box-shadow: none !important;
        }

        /* –ü–æ–¥—Å–≤–µ—Ç–∫–∏ */
        .glow-blue { border-color: rgba(36, 139, 242, 0.4); box-shadow: 0 0 20px rgba(36, 139, 242, 0.1); }
        .glow-red { border-color: rgba(239, 68, 68, 0.4); box-shadow: 0 0 20px rgba(239, 68, 68, 0.1); }
        .glow-purple { border-color: rgba(168, 85, 247, 0.4); box-shadow: 0 0 20px rgba(168, 85, 247, 0.1); }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è –∫–∞–∫ –≤ –ø—Ä–æ—Ñ–∏–ª–µ */
        .nav-blur {
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(15px);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        @keyframes spin-slow { to { transform: rotate(360deg); } }
        .animate-spin-slow { animation: spin-slow 12s linear infinite; }
    </style>
</head>
<body>

    <div class="mb-8 mt-4">
        <h1 class="text-3xl font-bold tracking-tight">–ú–∞–≥–∞–∑–∏–Ω</h1>
        <p class="text-zinc-500 text-sm">–û—Ç–∫—Ä—ã–≤–∞–π –∫–µ–π—Å—ã –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π MJ</p>
    </div>

    <div class="space-y-4">
        
        <div onclick="window.location.href='ice.html'" class="card-grad p-6 flex items-center justify-between">
            <div>
                <div class="flex items-center gap-2 mb-1">
                    <h2 class="text-lg font-bold">Ice Arena</h2>
                    <span class="bg-blue-500 text-[8px] px-1.5 py-0.5 rounded-full font-black uppercase">PVP</span>
                </div>
                <p class="text-xs text-zinc-500">–ë–∏—Ç–≤–∞ –∑–∞ MJ</p>
            </div>
            <div class="animate-spin-slow opacity-30">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5">
                    <path d="M12 2L15 5M12 2L9 5M12 22L15 19M12 22L9 19M22 12L19 15M22 12L19 9M2 12L5 15M2 12L5 9" stroke-linecap="round"/>
                </svg>
            </div>
        </div>

        <div onclick="window.location.href='inventory.html'" class="card-grad p-6 glow-purple flex items-center justify-between">
            <div>
                <h2 class="text-lg font-bold text-purple-400">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
                <p class="text-xs text-zinc-500">–¢–≤–æ–∏ –ø—Ä–µ–¥–º–µ—Ç—ã & NFT</p>
            </div>
            <span class="text-2xl">üéí</span>
        </div>

        <div id="case-5min" onclick="window.location.href='case_open.html'" class="card-grad p-6 glow-blue flex items-center justify-between">
            <div class="z-10">
                <h2 class="text-lg font-bold">–í—Å–µ –∏–ª–∏ –ù–∏—á–µ–≥–æ</h2>
                <p id="timer-5min" class="text-xs text-blue-500 font-medium">–î–æ—Å—Ç—É–ø–µ–Ω —Å–µ–π—á–∞—Å</p>
            </div>
            <img src="case.png" class="w-16 h-16 object-contain" onerror="this.src='https://cdn-icons-png.flaticon.com/512/679/679821.png'">
        </div>

        <div id="daily-card" onclick="openDaily()" class="card-grad p-6 glow-red flex items-center justify-between">
            <div class="z-10">
                <h2 class="text-lg font-bold text-red-500">Daily Free</h2>
                <p id="daily-status" class="text-xs text-zinc-500">–ü—Ä–æ–≤–µ—Ä–∫–∞...</p>
            </div>
            <img src="free.png" class="w-16 h-16 object-contain" onerror="this.src='https://cdn-icons-png.flaticon.com/512/2854/2854580.png'">
        </div>

    </div>

    <div class="fixed bottom-0 left-0 right-0 h-20 nav-blur flex justify-around items-center px-8 z-50">
        <a href="index.html" class="flex flex-col items-center gap-1 opacity-40 hover:opacity-100 transition-opacity">
            <span class="text-2xl">üè†</span>
            <span class="text-[10px] font-medium uppercase tracking-widest text-zinc-400">–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <div class="flex flex-col items-center gap-1 text-blue-500">
            <span class="text-2xl">üì¶</span>
            <span class="text-[10px] font-bold uppercase tracking-widest">–ö–µ–π—Å—ã</span>
        </div>
        <a href="profile.html" class="flex flex-col items-center gap-1 opacity-40 hover:opacity-100 transition-opacity">
            <span class="text-2xl">üë§</span>
            <span class="text-[10px] font-medium uppercase tracking-widest text-zinc-400">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const COOLDOWN_DAILY = 24 * 60 * 60 * 1000;
        const COOLDOWN_5MIN = 5 * 60 * 1000;

        function updateTimers() {
            // –¢–∞–π–º–µ—Ä –¥–ª—è Daily Free
            const lastDaily = localStorage.getItem('last_daily_open');
            const dailyCard = document.getElementById('daily-card');
            const dailyStatus = document.getElementById('daily-status');

            if (lastDaily) {
                const diff = Date.now() - parseInt(lastDaily);
                if (diff < COOLDOWN_DAILY) {
                    dailyCard.classList.add('locked');
                    const rem = COOLDOWN_DAILY - diff;
                    const h = Math.floor(rem/3600000);
                    const m = Math.floor((rem%3600000)/60000);
                    dailyStatus.innerText = `–î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ ${h}—á ${m}–º`;
                } else {
                    dailyCard.classList.remove('locked');
                    dailyStatus.innerText = "–ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å!";
                }
            } else {
                dailyStatus.innerText = "–ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å!";
            }

            // –¢–∞–π–º–µ—Ä –¥–ª—è 5-–º–∏–Ω—É—Ç–Ω–æ–≥–æ –∫–µ–π—Å–∞
            const last5min = localStorage.getItem('last_5min_open');
            const case5min = document.getElementById('case-5min');
            const timer5min = document.getElementById('timer-5min');

            if (last5min) {
                const diff = Date.now() - parseInt(last5min);
                if (diff < COOLDOWN_5MIN) {
                    case5min.classList.add('locked');
                    const rem = Math.ceil((COOLDOWN_5MIN - diff) / 1000);
                    timer5min.innerText = `–ñ–¥–∏—Ç–µ ${rem} —Å–µ–∫.`;
                    timer5min.className = "text-xs text-zinc-500";
                } else {
                    case5min.classList.remove('locked');
                    timer5min.innerText = "–î–æ—Å—Ç—É–ø–µ–Ω —Å–µ–π—á–∞—Å";
                    timer5min.className = "text-xs text-blue-500";
                }
            }
        }

        function openDaily() {
            tg.HapticFeedback.impactOccurred('medium');
            window.location.href = 'free_case.html';
        }

        updateTimers();
        setInterval(updateTimers, 1000);
        
        tg.ready();
        tg.expand();
    </script>
</body>
</html>